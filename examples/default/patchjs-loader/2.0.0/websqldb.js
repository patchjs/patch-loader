!function(){var e,t,n={init:function(){try{e=this.isSupported?window.openDatabase("patchjsdb","1.0","patchjs database",4194304):null}catch(n){t=n,e=null}},set:function(n,o,i){if(i=i||function(){},!e)return void i(!1,t);e.transaction(function(e){e.executeSql("create table if not exists assets (url text unique, code text, version text)"),e.executeSql("select version from assets where url = ?",[n],function(e,t){t.rows.length>0?e.executeSql("update assets set code = ?, version = ? where url = ?",[o.code,o.version,n],function(){i(!0)},function(e,t){i(!1,t)}):e.executeSql("insert into assets (url, code, version) values (?, ?, ?)",[n,o.code,o.version],function(){i(!0)},function(e,t){i(!1,t)})},function(e,t){i(!1,t)})},function(e,t){i(!1,t)})},get:function(t,n){if(!e)return void n(null);e.transaction(function(e){e.executeSql("select code, version from assets where url = ?",[t],function(e,t){n(t.rows.length>0?{code:t.rows.item(0).code,version:t.rows.item(0).version}:null)},function(e){n(null)})})},remove:function(t){e&&e.transaction(function(e){e.executeSql("delete from assets where url = ?",[t])})}};n.isSupported="openDatabase"in window,n.init(),window.patchjs=window.patchjs||{},window.patchjs.cache=n}();