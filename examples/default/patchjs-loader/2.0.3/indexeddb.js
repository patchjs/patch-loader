!function(){function n(n,t,e){if(e=e||function(){},!s)return void e(!1,c);var o=s.transaction(["assets"],"readwrite"),r=o.objectStore("assets");t.url=n;var i=r.put(t);i.onsuccess=function(){e(!0)},i.onerror=function(n){e(!1,n)}}function t(n,t){if(!s)return void t(null);var e=s.transaction(["assets"],"readonly"),o=e.objectStore("assets"),c=o.get(n);c.onsuccess=function(n){t(n.target.result||null)},c.onerror=function(){t(null)}}function e(n){if(s){s.transaction(["assets"],"readwrite").objectStore("assets").delete(n)}}function o(){i.forEach(function(n){n()}),i.length=0}var s,c,r="PENDING",i=[],u={init:function(){var n=window.indexedDB.open("patchjsdb");n.onupgradeneeded=function(n){s=n.target.result,s.createObjectStore("assets",{keyPath:"url"})},n.onsuccess=function(n){r="COMPLETE",s=n.target.result,o()},n.onerror=function(n){c=n,r="COMPLETE",s=null,o()}},set:function(t,e,o){"PENDING"===r?i.push(function(){n(t,e,o)}):n(t,e,o)},get:function(n,e){"PENDING"===r?i.push(function(){t(n,e)}):t(n,e)},remove:function(n){"PENDING"===r?i.push(function(){e(n)}):e(n)}};u.init(),window.patchjs=window.patchjs||{},window.patchjs.cache=u}();